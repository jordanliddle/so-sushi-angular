"use strict";angular.module("spiritshopApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngFx","customFilters","cart"]).config(["$routeProvider",function(a){a.when("/complete",{templateUrl:"views/thankYou.html"}).when("/placeorder",{templateUrl:"views/placeOrder.html"}).when("/checkout",{templateUrl:"views/checkoutSummary.html"}).when("/products",{templateUrl:"views/productList.html"}).when("/",{templateUrl:"views/productList.html"}).otherwise({templateUrl:"views/productList.html"})}]),angular.module("spiritshopApp").controller("cartSummaryController",["$scope","cart",function(a,b){a.cartData=b.getProducts(),a.total=function(){for(var b=0,c=0;c<a.cartData.length;c++)b+=a.cartData[c].price*a.cartData[c].count;return b},a.remove=function(a){b.removeProduct(a)}}]),angular.module("spiritshopApp").constant("dataUrl","http://localhost:5500/products").constant("orderUrl","http://localhost:5500/orders").controller("MainCtrl",["$scope","$http","$location","dataUrl","orderUrl","cart",function(a,b,c,d,e,f){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.data={},b.get(d).success(function(b){a.data.products=b}).error(function(b){a.data.error=b}),a.sendOrder=function(d){var g=angular.copy(d);g.products=f.getProducts(),b.post(e,g).success(function(b){a.data.orderId=b.id,f.getProducts().length=0}).error(function(b){a.data.orderError=b}).finally(function(){c.path("/complete")})}}]),angular.module("spiritshopApp").constant("productListActiveClass","active").constant("productListPageCount",3).controller("productListCtrl",["$scope","$filter","productListActiveClass","productListPageCount","cart",function(a,b,c,d,e){var f=null;a.selectedPage=1,a.pageSize=d,a.selectCategory=function(b){f=b,a.selectedPage=1},a.selectPage=function(b){a.selectedPage=b},a.categoryFilterFn=function(a){return null==f||a.category==f},a.getCategoryClass=function(a){return f==a?c:""},a.getPageClass=function(b){return a.selectedPage==b?c:""},a.addProductToCart=function(a){e.addProduct(a.id,a.name,a.price)}}]),angular.module("customFilters",[]).filter("unique",function(){return function(a,b){if(angular.isArray(a)&&angular.isString(b)){for(var c=[],d={},e=0;e<a.length;e++){var f=a[e][b];angular.isUndefined(d[f])&&(d[f]=!0,c.push(f))}return c}return a}}).filter("range",["$filter",function(a){return function(b,c,d){if(angular.isArray(b)&&angular.isNumber(c)&&angular.isNumber(d)){var e=(c-1)*d;return b.length<e?[]:a("limitTo")(b.splice(e),d)}return b}}]).filter("pageCount",function(){return function(a,b){if(angular.isArray(a)){for(var c=[],d=0;d<Math.ceil(a.length/b);d++)c.push(d);return c}return a}}),angular.module("cart",[]).factory("cart",function(){var a=[];return{addProduct:function(b,c,d){for(var e=!1,f=0;f<a.length;f++)if(a[f].id==b){a[f].count++,e=!0;break}e||a.push({count:1,id:b,price:d,name:c})},removeProduct:function(b){for(var c=0;c<a.length;c++)if(a[c].id==b){a.splice(c,1);break}},getProducts:function(){return a}}}).directive("cartSummary",["cart",function(a){return{restrict:"EA",templateUrl:"views/cartSummary.html",controller:["$scope",function(b){var c=a.getProducts();b.total=function(){for(var a=0,b=0;b<c.length;b++)a+=c[b].price*c[b].count;return a},b.itemCount=function(){for(var a=0,b=0;b<c.length;b++)a+=c[b].count;return a}}]}}]);